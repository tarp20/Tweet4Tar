{% extends 'pages/base.html' %}

{% block head_title %}
Home    
{% endblock head_title %}
    

{% block content %}
    Welcome to <h1>T$T</h1>

    <div id = 'tweets'>
       Loading...
    </div>


    <script>
        const tweetsElement = document.getElementById('tweets')

                const xhr = new XMLHttpRequest();
        const method  = 'GET'
        const url = '/tweets'
        const responseType = 'json'
        
        
        xhr.responseType = responseType
        xhr.open(method,url )
        xhr.onload = function(){
            
            const serverResponse = xhr.response
            const listedItems = serverResponse.response
            console.log(listedItems)
            var finalTweetStr = ""
            var i;
            for(i=0;i<listedItems.length;i++){
                console.log(i)
                console.log(listedItems[i])
                var currentItem = "<div class='mb-4'><h1>"+listedItems[i].id +  "</h1>"+"<p>"+ listedItems[i].content+"</p></div>"
                 finalTweetStr += currentItem
            }
            tweetsElement.innerHTML = finalTweetStr;
        }
        xhr.send();
    </script>
{% endblock  %}
    